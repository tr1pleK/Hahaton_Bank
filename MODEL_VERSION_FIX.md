# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ - –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞

–ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑-–∑–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≤–µ—Ä—Å–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫:

```
ModuleNotFoundError: No module named 'numpy._core.numeric'
InconsistentVersionWarning: Trying to unpickle estimator DecisionTreeClassifier from version 1.7.2 when using version 1.3.2
```

## –ü—Ä–∏—á–∏–Ω–∞

–ú–æ–¥–µ–ª—å –±—ã–ª–∞ –æ–±—É—á–µ–Ω–∞ —Å:
- **scikit-learn 1.7.2** (–≤ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ 1.3.2)
- **numpy 2.x** —Å –º–æ–¥—É–ª–µ–º `numpy._core.numeric` (–≤ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ 1.26.2)

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫

–û–±–Ω–æ–≤–ª–µ–Ω `requirements.txt`:
- `scikit-learn==1.7.2` (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –º–æ–¥–µ–ª—å—é)
- `numpy>=1.26.0,<2.0.0` (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ, –Ω–æ –±–µ–∑ numpy._core)
- `scipy>=1.11.4`

### –®–∞–≥ 2: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑

```bash
docker-compose down
docker-compose build --no-cache
docker-compose up
```

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

–ï—Å–ª–∏ –º–æ–¥–µ–ª—å –±—ã–ª–∞ –æ–±—É—á–µ–Ω–∞ —Å **numpy 2.x**, —É –≤–∞—Å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –û–±–Ω–æ–≤–∏—Ç—å numpy –¥–æ 2.x (–µ—Å–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ)

```txt
numpy>=2.0.0
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** numpy 2.x –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –¥—Ä—É–≥–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏.

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å —Å numpy 1.x (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –≤–µ—Ä—Å–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   pip install scikit-learn==1.7.2 numpy==1.26.2 scipy==1.11.4
   ```

2. **–ü–µ—Ä–µ–æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å:**
   ```bash
   python scripts/train_transaction_classifier.py "–ø—É—Ç—å/–∫/ci_data.csv"
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker:**
   ```bash
   docker-compose restart backend
   ```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –±—ã–ª–∞ –æ–±—É—á–µ–Ω–∞ –º–æ–¥–µ–ª—å:

```python
import pickle
import sys

model_path = "ml_models/transaction_classifier.pkl"
with open(model_path, 'rb') as f:
    try:
        model_data = pickle.load(f)
        print("–ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")
        print(f"–í–µ—Ä—Å–∏–∏ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏: {model_data.get('trained_at', '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')}")
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞: {e}")
        print(f"Python –≤–µ—Ä—Å–∏—è: {sys.version}")
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:

```
‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
   is_trained: True
‚úÖ –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```

–í–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏:
```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–µ–ª–∏: No module named 'numpy._core.numeric'
```

